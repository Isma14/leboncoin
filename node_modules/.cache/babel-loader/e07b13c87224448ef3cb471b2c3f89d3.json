{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ismahanechaffar/Formations/LeReacteur/React/leboncoin/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ismahanechaffar/Formations/LeReacteur/React/leboncoin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/ismahanechaffar/Formations/LeReacteur/React/leboncoin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ismahanechaffar/Formations/LeReacteur/React/leboncoin/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ismahanechaffar/Formations/LeReacteur/React/leboncoin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ismahanechaffar/Formations/LeReacteur/React/leboncoin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ismahanechaffar/Formations/LeReacteur/React/leboncoin/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ismahanechaffar/Formations/LeReacteur/React/leboncoin/src/containers/Home.js\";\nimport React from \"react\"; // import Button from \"../components/Button\";\n\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nvar limit = 25;\n\nvar Home =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      offers: [],\n      count: 0,\n      page: 1,\n      totalPages: 0\n    };\n\n    _this.getOffers =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(pageCliked) {\n        var skip, response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                skip = (pageCliked - 1) * limit;\n                _context.next = 3;\n                return axios.get(\"https://leboncoin-api.herokuapp.com/api/offer/with-count?skip=${skip}&limit=${limit}\");\n\n              case 3:\n                response = _context.sent;\n\n                _this.setState({\n                  offers: response.data.offers,\n                  page: response.data.page\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var pagesLink = [];\n\n      var _loop = function _loop(i) {\n        pagesLink.push(React.createElement(\"li\", {\n          onClick: function onClick() {\n            return _this2.getOffers(i + 1);\n          },\n          key: i,\n          style: {\n            color: i + 1 === _this2.state.page ? \"pink\" : \"black\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30\n          },\n          __self: this\n        }, i + 1));\n      };\n\n      for (var i = 0; i < this.state.totalPages; i++) {\n        _loop(i);\n      }\n\n      return React.createElement(React.Fragment, null, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, \"Home\"), React.createElement(\"ul\", {\n        className: \"offers-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, this.state.offers.map(function (offer, index) {\n        return React.createElement(\"li\", {\n          key: offer.id,\n          className: \"offers-list-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/offer/\" + offer._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, offer.title, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }), offer.price));\n      })), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, pagesLink), React.createElement(Link, {\n        to: \"offer/1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, \"Lien vers annonces\"));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return axios.get(\"https://leboncoin-api.herokuapp.com/api/offer/with-count\");\n\n              case 2:\n                response = _context2.sent;\n                this.setState({\n                  offers: response.data.offers,\n                  count: response.data.count,\n                  totalPages: Math.ceil(response.data.count / limit)\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }]);\n\n  return Home;\n}(React.Component);\n\nexport default Home;","map":{"version":3,"sources":["/Users/ismahanechaffar/Formations/LeReacteur/React/leboncoin/src/containers/Home.js"],"names":["React","axios","Link","limit","Home","state","offers","count","page","totalPages","getOffers","pageCliked","skip","get","response","setState","data","pagesLink","i","push","color","map","offer","index","id","_id","title","price","Math","ceil","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\n// import Button from \"../components/Button\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nconst limit = 25;\n\nclass Home extends React.Component {\n  state = {\n    offers: [],\n    count: 0,\n    page: 1,\n    totalPages: 0\n  };\n  getOffers = async pageCliked => {\n    const skip = (pageCliked - 1) * limit;\n\n    const response = await axios.get(\n      \"https://leboncoin-api.herokuapp.com/api/offer/with-count?skip=${skip}&limit=${limit}\"\n    );\n    this.setState({\n      offers: response.data.offers,\n      page: response.data.page\n    });\n  };\n  render() {\n    const pagesLink = [];\n    for (let i = 0; i < this.state.totalPages; i++) {\n      pagesLink.push(\n        <li\n          onClick={() => this.getOffers(i + 1)}\n          key={i}\n          style={{ color: i + 1 === this.state.page ? \"pink\" : \"black\" }}\n        >\n          {i + 1}\n        </li>\n      );\n    }\n\n    return (\n      <>\n        <h1>Home</h1>\n        <ul className=\"offers-list\">\n          {this.state.offers.map((offer, index) => {\n            return (\n              <li key={offer.id} className=\"offers-list-item\">\n                <Link to={\"/offer/\" + offer._id}>\n                  {offer.title}\n                  <br />\n                  {offer.price}\n                </Link>\n              </li>\n            );\n          })}\n        </ul>\n        <ul>{pagesLink}</ul>\n        <Link to=\"offer/1\">Lien vers annonces</Link>\n      </>\n    );\n  }\n  async componentDidMount() {\n    const response = await axios.get(\n      \"https://leboncoin-api.herokuapp.com/api/offer/with-count\"\n    );\n    this.setState({\n      offers: response.data.offers,\n      count: response.data.count,\n      totalPages: Math.ceil(response.data.count / limit)\n    });\n  }\n}\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}